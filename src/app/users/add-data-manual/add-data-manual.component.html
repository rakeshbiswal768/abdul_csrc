<div class="card minStage mt-2-5">
  <div class="closeBtnModal">
    <button aria-label="Close" class="btn close" type="button" [routerLink]="['/dashboard']">
      <span aria-hidden="true">Ã—</span>
    </button>
  </div>
  <div class="card-header">
    <div class="row align-items-center">
      <div class="col">
        <app-user-details [name]="name" [dueInDays]="dueInDays" [reqStatus]="reqStatus" [dueDate]="dueDate"></app-user-details>
      </div>
      <div class="col-md-auto">
        <div class="btn-group">
          <button type="button" class="btn btn-secondary w-btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            Add Data
          </button>
          <div class="dropdown-menu dropdown-menu-right">
            <button class="dropdown-item" routerLink="/users/import-file/{{requestId}}" type="button">Import data files</button>
            <button class="dropdown-item" routerLink="/users/import-data/{{requestId}}" type="button">Start with a template</button>
            <button class="dropdown-item" routerLink="/users/add-manual/{{requestId}}" type="button">Add data manually</button>
          </div>
        </div>
        <button type="button" class="btn btn-primary w-btn" (click)="sendData()" [ngStyle]="{'background-color': app.localStoragebtn(),'border-color': app.localStoragebtn()}">
          Ready for delivery
        </button>

      </div>
    </div>
  </div>
  <!-- <div class="card-header">
    <div class="row">
      <div class="col">
        <app-user-details [name]="name" [dueDate]="dueDate"></app-user-details>
      </div>
      <div class="col-md-auto">
        <button type="button" class="btn btn-secondary w-btn mr-3" (click)="cancelAction()"> Cancel </button>
        <button type="button" class="btn btn-primary" [ngStyle]="{'background-color': localStoragebtn,'border-color': localStoragebtn}"> ready for delivery </button>
      </div>
    </div>
  </div> -->
  <div class="card-body tmplMinheight">
    <div class="import-data mb30 mt-3 pl-3">
      <div class="row">
        <div class="col-lg-2 filterPanel" id="fitlerResult">
          <form class="">
            <div class="form-group">
              <label for="userSeachbox" class="textLabel font-weight-bold text-small text-uppercase">Collected Data</label>
              <input type="text" id="userSeachbox" aria-describedby="Filter Collected Data" class="form-control searchIcon" name="userSeachbox"
              />
            </div>
          </form>
          <span class="importDataTitle pt-1 pb-1">BROWSE BY CATEGORY</span>
          <p-panelMenu [model]="items"></p-panelMenu>
        </div>
        <div class="col-lg-10 tempContainer" *ngIf="!showRecords">
          <div class="row align-items-center">
            <div class="col">
              <h1 class="subTitle">Add data manually</h1>
            </div>
            <div class="col-md-auto">
              <button type="button" class="btn btn-secondary w-btn mr-3" routerLink="/users/user-profile"> Cancel </button>
              <button type="button" class="btn btn-primary" (click)="saveTemplateData()" [ngStyle]="{'background-color': app.localStoragebtn(),'border-color': app.localStoragebtn()}">
                Save </button>
            </div>
          </div>
          <div id="safe-sidenav" name="safe-sidenav" [ngClass]="{'safe-sivenav': true, 'active': data!=null}">
            <div name="safe-sidenav" class="settingTitle pb-3">Settings</div>
            <div name="safe-sidenav" *ngIf="tableColumns;else otherT">
              <h3 class="textHeading pt-1">Table Column</h3>
              <div *ngFor="let col of tableColumns|slice:1:tableColumns.length">
                <input type='text' name="safe-sidenav" class="form-control" [(ngModel)]="col.header" (focus)="focusFunction()" (focusout)="focusOutFunction()"
                />
              </div>
              <h3 class="textHeading pt-3">Table Row</h3>
              <div *ngFor="let col of tableRows">
                <input type='text' name="safe-sidenav" class="form-control" [(ngModel)]="col.Column0" (focus)="focusFunction()" (focusout)="focusOutFunction()"
                />
              </div>
            </div>
            <ng-template #otherT>
              <div name="safe-sidenav" *ngIf="data?.id=='dateRange'||data?.id=='fullName';else singleVal">
                <input type='text' name="safe-sidenav" class="form-control" [(ngModel)]="data.value" (focus)="focusFunction()" (focusout)="focusOutFunction()"
                />
                <input type='text' name="safe-sidenav" class="form-control" [(ngModel)]="data.value1" (focus)="focusFunction()" (focusout)="focusOutFunction()"
                />
                <input type='text' name="safe-sidenav" class="form-control" [(ngModel)]="data.value2" (focus)="focusFunction()" (focusout)="focusOutFunction()"
                />
              </div>
              <ng-template #singleVal>
                <div name="safe-sidenav" *ngIf="data">
                  <input type='text' name="safe-sidenav" class="form-control" [(ngModel)]="data.value" (focus)="focusFunction()" (focusout)="focusOutFunction()"
                  />
                </div>
              </ng-template>

            </ng-template>

          </div>
          <div class="ui-widget-content border0" *ngIf="!showRecords">
            <p-growl [(value)]="msgs"></p-growl>
            <form class="">
              <div class="ui-widget-content rightResult border0 pl-0" id="div2" #divE2>
                <div class="row">
                  <div class="col-lg-6">
                    <label class="tmpllabel mb-0 pt-3" for="heading">Name this Record</label>
                    <input class="form-control safePlaceHolder noBorder mb-2 pt-0" id="heading" [(ngModel)]="templateName" [ngModelOptions]="{standalone: true}"
                      type="text" required />
                    <label for="templatecategories" class="tmpllabel mb-0 pt-3">Information Type</label>
                    <div class="dropdown" id="selectRole">
                      <button class="btn btn-light_2 dropdown-toggle w-50 wideBtn" type="button" id="dropdownMenuButton" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false">{{informationTypeName}}</button>
                      <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <div *ngFor="let infotype of infoTypes">
                          <a class="dropdown-item" href="javascript:void(0);" id="infotype.id" (click)="changeInfoType(infotype.id,infotype.name)">{{infotype.name}} </a>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-lg-12">
                    <div class="pl-0">
                      <div class="mt-5">
                        <tb-template [dragula]='"first-bag"' [dragulaModel]="sharedData.templateData"></tb-template>
                      </div>
                      <div class="dropdown">
                        <button class="btn btnDefault dropdown-toggle roundBtn" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                          aria-expanded="false">+</button>
                        <div class="dropdown-menu roundBtnItems" aria-labelledby="dropdownMenuButton">
                          <a class="dropdown-item pt-3" href="javascript:void(0);" (click)="addItem('header','string')">
                            <img src="/assets/images/icon-tb-heading.svg" alt="Heading" class="tmplIcon" /> Heading
                          </a>
                          <a class="dropdown-item pt-3" href="javascript:void(0);" (click)="addItem('ste','string')">
                            <img src="/assets/images/icon-tb-shorttextentry.svg" alt="Insert Short Text Entry Field" class="tmplIcon" /> Text
                          </a>
                          <a class="dropdown-item pt-3" href="javascript:void(0);" (click)="addItem('number','number')">
                            <img src="/assets/images/icon-tb-number.svg" alt="Insert Number Field" class="tmplIcon" /> Number
                          </a>
                          <a class="dropdown-item pt-3" href="javascript:void(0);" (click)="addItem('table','object')">
                            <img src="/assets/images/icon-tb-table.svg" alt="Insert Table" class="tmplIcon" /> Table
                          </a>
                          <a class="dropdown-item pt-3" href="javascript:void(0);" (click)="addItem('date','string')">
                            <img src="/assets/images/icon-tb-date.svg" alt="Insert Date" class="tmplIcon" /> Date
                          </a>
                          <a class="dropdown-item pt-3" href="javascript:void(0);" (click)="addItem('dateRange','string')">
                            <img src="/assets/images/icon-tb-daterange.svg" alt="Insert Date Range" class="tmplIcon" /> Date Range
                          </a>
                          <a class="dropdown-item pt-3" href="javascript:void(0);" (click)="addItem('fullName','string')">
                            <img src="/assets/images/icon-tb-fullname.svg" alt="Insert Fullname" class="tmplIcon" /> Full Name
                          </a>
                          <a class="dropdown-item pt-3" href="javascript:void(0);" (click)="addItem('address','string')">
                            <img src="/assets/images/icon-tb-address.svg" alt="Insert Address Field" class="tmplIcon" /> Address
                          </a>
                          <a class="dropdown-item pt-3" href="javascript:void(0);" (click)="addItem('email','string')">
                            <img src="/assets/images/icon-tb-email.svg" alt="Insert eMail Field" class="tmplIcon" /> Email
                          </a>
                          <a class="dropdown-item pt-3" href="javascript:void(0);" (click)="addItem('phone','string')">
                            <img src="/assets/images/icon-tb-phone.svg" alt="Insert Phone Field" class="tmplIcon" /> Phone
                          </a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </div>

          <!-- <div class="">
                        <button type="button" class="btn btn-primary mr-5 mt-3" (click)="saveTemplateData()" id="signupBtn" [ngStyle]="{'background-color': app.localStoragebtn(),'border-color': app.localStoragebtn()}">Save Changes</button>
                    </div> -->
        </div>
        <div class="col-lg-8 tempContainer" *ngIf="showRecords">
          <div class="tempTabs">
            <ngb-tabset>
              <ngb-tab title="Records">
                <ng-template ngbTabContent>
                  <app-records [informationTypeId]="informationTypeIdSel"></app-records>
                </ng-template>
              </ngb-tab>
              <ngb-tab title="Imported Files">
                <ng-template ngbTabContent>
                  <app-imported-files [requestId]="requestId" [informationTypeId]="informationTypeIdSel"></app-imported-files>
                </ng-template>
              </ngb-tab>
            </ngb-tabset>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
